<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>RBAC访问控制 - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Fluid</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-11-27 14:48">
      2020年11月27日 下午
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.3k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      58
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h1 id="RBAC访问控制实验"><a href="#RBAC访问控制实验" class="headerlink" title="RBAC访问控制实验"></a>RBAC访问控制实验</h1><h2 id="RBAC简介"><a href="#RBAC简介" class="headerlink" title="RBAC简介"></a>RBAC简介</h2><p>RBAC（Role-based Access Control）基于角色的访问控制模型，从根本上来讲是解决资源的控制的问题，而在这里所提出的解决方案是who、what以及how的解决方式，其中who是指权限的拥有者或者主体（user，role）而what就是资源或者对象，可以抽象为who对what进行来how操作</p>
<blockquote>
<p>RBAC其实是一种分析模型，主要分为：基本模型RBAC0（Core RBAC）、角色分层模型RBAC1（Hierarchal RBAC）、角色限制模型RBAC2（Constraint RBAC）和统一模型RBAC3（Combines RBAC）。</p>
</blockquote>
<h3 id="RBAC0"><a href="#RBAC0" class="headerlink" title="RBAC0"></a>RBAC0</h3><p>由四部分组成：用户、角色、会话和许可，</p>
<p><img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/1-1.PNG" srcset="/img/loading.gif" alt="1-1"></p>
<h3 id="RBAC1（角色分层模型）"><a href="#RBAC1（角色分层模型）" class="headerlink" title="RBAC1（角色分层模型）"></a>RBAC1（角色分层模型）</h3><p>在RBAC0的基础上引入了角色的继承，使得角色具有了上下级的关系，例如下图</p>
<p><img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/1-2.PNG" srcset="/img/loading.gif" alt="1-2"></p>
<p><img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/1-4.PNG" srcset="/img/loading.gif" alt="1-4"></p>
<h3 id="RBAC2（约束模型）"><a href="#RBAC2（约束模型）" class="headerlink" title="RBAC2（约束模型）"></a>RBAC2（约束模型）</h3><p>加入了约束的概念，并且引入了静态职责分离SSD(Static Separation of Duty)和动态职责分离DSD(Dynamic Separation of Duty)</p>
<blockquote>
<p><strong>SSD是用户和角色的指派阶段加入的，主要是对用户和角色有如下约束:</strong></p>
<ul>
<li>a、互斥角色：同一个用户在两个互斥角色中只能选择一个</li>
<li>b、基数约束：一个用户拥有的角色是有限的，一个角色拥有的许可也是有限的</li>
<li>c、先决条件约束：用户想要获得高级角色，首先必须拥有低级角色</li>
</ul>
<p><strong>DSD是会话和角色之间的约束，可以动态的约束用户拥有的角色，如一个用户可以拥有两个角色，但是运行时只能激活一个角色。</strong></p>
</blockquote>
<p><img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/1-3.PNG" srcset="/img/loading.gif" alt="1-3"></p>
<h3 id="RBAC3（RBAC1-RBAC2）"><a href="#RBAC3（RBAC1-RBAC2）" class="headerlink" title="RBAC3（RBAC1 + RBAC2）"></a>RBAC3（RBAC1 + RBAC2）</h3><p><img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/1-5.PNG" srcset="/img/loading.gif" alt="1-5"></p>
<h2 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h2><p>原始框架</p>
<p><img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/2-1.png" srcset="/img/loading.gif" alt="2-1"></p>
<h3 id="主体、角色、权限的定义以及相应配置"><a href="#主体、角色、权限的定义以及相应配置" class="headerlink" title="主体、角色、权限的定义以及相应配置"></a>主体、角色、权限的定义以及相应配置</h3><p>在这个例子当中，主体/用户是A、B、M1、C、D、M2以及BOSS，而相应的角色分为了第一类员工（A、B），部门经理（M1），第二类员工（C、D），经理（M2）以及BOSS，对应的权限就是读取，执行；读取、删除、执行；新建、读取、更改；新建、删除、读取、更改；所有权限</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>在运行的本文件的时候，<strong>管理员账户密码为1234</strong></p>
<p>其次，我参考了一些网上方法，采用的是数据库的格式，所以每次运行完的结果都会存在对应的db文件中，可以通过<strong>新建txt并且重新命名为datatable.db来重新初始化</strong></p>
<p>最后，由于是花了几天时间实现的，所以<strong>不同地方的注释和print出来的东西有中文有英文</strong>，但是都是自己验证通过的</p>
<h3 id="设计文档"><a href="#设计文档" class="headerlink" title="设计文档"></a>设计文档</h3><ul>
<li><p>设计思路：</p>
<p>  <img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/3-2.PNG" srcset="/img/loading.gif" alt="3-2"></p>
<p>  在这里我希望采用三个对象来对于用户、角色还有权限进行分别管理，同时，我才用了sqlite包来帮助实现对应的db文件中的几个表，而对于用户/角色/权限的一些操作，是通过这三个类里面的函数来进行实现的，下面来对不同的类进行分别解释</p>
</li>
<li><p><strong>对用户管理的类usermanager（）</strong></p>
<p>  包含的方法以及所要完成的功能/作用：</p>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">函数的功能/作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">set_user_table（）</td>
<td align="center">初始化对应的user表，实现例子里面的内容</td>
</tr>
<tr>
<td align="center">set_user_role_table（）</td>
<td align="center">初始化对应的用户角色关联表</td>
</tr>
<tr>
<td align="center">add_user_role（）</td>
<td align="center">这是在添加用户的时候所需要用到的，要了解想要添加的用户的角色id</td>
</tr>
<tr>
<td align="center">user_info（）</td>
<td align="center">获取所要添加的用户的名称以及用户id</td>
</tr>
<tr>
<td align="center">add_user（）</td>
<td align="center">在用户表里面检索，符合要求时添加对应的表项</td>
</tr>
<tr>
<td align="center">user_name_show（）</td>
<td align="center">显示用户的信息的时候用到的</td>
</tr>
</tbody></table>
<p>  <strong>具体代码实现</strong></p>
  <pre><code class="hljs python"><span class="hljs-keyword">import</span> sqlite3
<span class="hljs-comment">#初始化对于用户管理的类</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">usermanager</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self)</span>:</span>
        super().__init__()
    <span class="hljs-comment">#该方法用于设置对应的用户表</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_user_table</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-comment">#建立连接和游标对象</span>
        con = sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur = con.cursor()
        sql = <span class="hljs-string">'insert into user(user_name,user_id) values(?,?)'</span>
        <span class="hljs-keyword">try</span>:
            cur.executemany(sql,[(<span class="hljs-string">"员工A"</span>,<span class="hljs-number">1</span>),(<span class="hljs-string">"员工B"</span>,<span class="hljs-number">2</span>),(<span class="hljs-string">"员工C"</span>,<span class="hljs-number">3</span>),(<span class="hljs-string">"员工D"</span>,<span class="hljs-number">4</span>),(<span class="hljs-string">"部门经理M1"</span>,<span class="hljs-number">5</span>),(<span class="hljs-string">"部门经理M2"</span>,<span class="hljs-number">6</span>),(<span class="hljs-string">"Boss"</span>,<span class="hljs-number">7</span>)])
            con.commit()
            print(<span class="hljs-string">"用户表设置成功"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">"设置用户表失败"</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()
    
    
    <span class="hljs-comment">#该方法用于设置对应的用户角色关联表</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_user_role_table</span><span class="hljs-params">(self)</span>:</span>
        con=sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur=con.cursor()
        sql=<span class="hljs-string">'insert into user_role(user_id,role_id) values(?,?)'</span>
        <span class="hljs-keyword">try</span>:
            cur.executemany(sql,[(<span class="hljs-number">1</span>,<span class="hljs-number">101</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">101</span>),(<span class="hljs-number">3</span>,<span class="hljs-number">201</span>),(<span class="hljs-number">4</span>,<span class="hljs-number">201</span>),(<span class="hljs-number">5</span>,<span class="hljs-number">100</span>),(<span class="hljs-number">6</span>,<span class="hljs-number">200</span>),(<span class="hljs-number">7</span>,<span class="hljs-number">404</span>)])
            con.commit()
            print(<span class="hljs-string">"用户角色关联表设置成功"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">"用户角色关联表设置失败"</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()

    <span class="hljs-comment">#该方法用于管理/增加用户角色关联表里面的内容</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_user_role</span><span class="hljs-params">(self)</span>:</span>
        print(<span class="hljs-string">"用户可以选择的角色:1.第一类员工2.第一类员工的经理3.第二类员工4.第二类员工经理5.老板"</span>)
        user_type = int(input(<span class="hljs-string">"请输入用户对应的角色id:"</span>))
        <span class="hljs-keyword">if</span> user_type == <span class="hljs-number">1</span>:
            user_role = <span class="hljs-string">"第一类员工"</span>
            role_id = <span class="hljs-number">101</span>
            <span class="hljs-keyword">return</span> user_role,role_id
        <span class="hljs-keyword">elif</span> user_type == <span class="hljs-number">2</span>:
            user_role = <span class="hljs-string">"第一类员工的经理"</span>
            role_id = <span class="hljs-number">100</span>
            <span class="hljs-keyword">return</span> user_role,role_id
        <span class="hljs-keyword">elif</span> user_type == <span class="hljs-number">3</span>:
            user_role = <span class="hljs-string">"第二类员工"</span>
            role_id = <span class="hljs-number">201</span>
            <span class="hljs-keyword">return</span> user_role,role_id
        <span class="hljs-keyword">elif</span> user_type == <span class="hljs-number">4</span>:
            user_role = <span class="hljs-string">"第二类员工的经理"</span>
            role_id = <span class="hljs-number">200</span>
            <span class="hljs-keyword">return</span> user_role,role_id
        <span class="hljs-keyword">elif</span> user_type == <span class="hljs-number">5</span>:
            print(<span class="hljs-string">"无权限添加老板"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>,<span class="hljs-literal">None</span>
        <span class="hljs-keyword">else</span>:
            print(<span class="hljs-string">"无法识别用户对应的角色id,请按照上面输入用户角色对应的数字"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>,<span class="hljs-literal">None</span>
    
    <span class="hljs-comment">#该方法用来展示输入要添加的用户的用户名以及对应你id</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">user_info</span><span class="hljs-params">(self)</span>:</span>
        user_name=input(<span class="hljs-string">'请输入用户名：'</span>)
        user_id=int(input(<span class="hljs-string">'请输入用户id:'</span> ))
        <span class="hljs-keyword">return</span> user_name,user_id


    <span class="hljs-comment">#该方法用来实现添加对应的用户</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_user</span><span class="hljs-params">(self)</span>:</span>
        (user_role,role_id)=self.add_user_role()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_role <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> role_id :
            print(<span class="hljs-string">"操作失败！"</span>)
            <span class="hljs-keyword">return</span>
        (user_name,user_id)=self.user_info()
        con=sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur=con.cursor()
        con.row_factory=sqlite3.Row
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment">#首先需要判断输入的用户名是否已经存在</span>
            sql=<span class="hljs-string">'select *from user'</span>
            cur.execute(sql)
            <span class="hljs-comment">#判断输入的用户名是否在用户表当中</span>
            exist = <span class="hljs-literal">False</span>
            <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> cur:
                <span class="hljs-keyword">if</span> user[<span class="hljs-number">1</span>] == user_name:
                    exist = <span class="hljs-literal">True</span>
                    <span class="hljs-comment">#此时，用户表中存在对应的用户</span>
                    true_user_id=user[<span class="hljs-number">2</span>]
                    true_role_id=<span class="hljs-literal">None</span>
                    <span class="hljs-comment">#之后，从用户角色关联表当中查到对应的角色</span>
                    sql1=<span class="hljs-string">'select *from user_role'</span>
                    cur.execute(sql1)
                    <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
                        <span class="hljs-keyword">if</span> row[<span class="hljs-number">1</span>] == true_user_id:
                            true_role_id = row[<span class="hljs-number">2</span>]
                            <span class="hljs-comment">#此时，已经找到了在用户角色关联表当中的角色id</span>
                    <span class="hljs-comment">#之后需要进行角色互斥，在这里面所有角色都为互斥，比如不可能既是老板又是员工，设定一个人只能拥有一个角色</span>
                    <span class="hljs-keyword">if</span> role_id == true_role_id:
                        print(<span class="hljs-string">"该用户已经存在这种角色"</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exist:
                <span class="hljs-comment">#如果不在用户表中，需要把新的用户以及用户id添加到用户表当中</span>
                <span class="hljs-keyword">try</span>:
                    sql = <span class="hljs-string">'insert into user(user_name,user_id) values(?,?)'</span>
                    cur.execute(sql,(user_name,user_id))
                    con.commit()
                    print(<span class="hljs-string">"新增用户成功"</span>)
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    print(e)
                    con.rollback()
                    print(<span class="hljs-string">"新增用户失败"</span>)
                <span class="hljs-comment">#之后，我们需要根据add_user_role()得知想要添加的用户对应的角色id,加到用户角色关联表当中</span>
                <span class="hljs-keyword">try</span>:
                    sql1 = <span class="hljs-string">'insert into user_role(user_id,role_id) values(?,?)'</span>
                    cur.execute(sql1,(user_id,role_id))
                    con.commit()
                    print(<span class="hljs-string">"新增用户角色关联条目成功"</span>)
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    print(e)
                    con.rollback()
                    print(<span class="hljs-string">"新增用户角色关联条目失败"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            print(<span class="hljs-string">"add_user()失败，请进行检查"</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">user_name_show</span><span class="hljs-params">(self)</span>:</span>
        con = sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur=con.cursor()
        con.row_factory=sqlite3.Row
        sql=<span class="hljs-string">'select *from user'</span>
        <span class="hljs-keyword">try</span>:
            cur.execute(sql)
            print(<span class="hljs-string">"显示用户信息"</span>) 
            user_list=[]
            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
                user_list.append(row[<span class="hljs-number">1</span>])
            print(user_list)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">"显示用户信息失败"</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()</code></pre>
</li>
<li><p><strong>对权限进行管理的类rolemanager（）</strong></p>
<p>  包含的方法以及各自作用：</p>
<p>  首先明确在这个类里面，我们首先要实现把<strong>具体例子的角色表以及对应的角色权限关联表初始化</strong>，其次要完成的是<strong>基于角色的权限的修改</strong>，<strong>在这里我是进行来一个限制，不能让一些角色通过提升或者删除权限来变成了另一个角色</strong>，最后的话是<strong>用来展示当前角色表信息的函数</strong></p>
<ul>
<li>对于角色表以及对应的角色权限关联表初始化的函数</li>
</ul>
</li>
</ul>
<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_role_table</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-comment">#set the connection to the db file</span>
        con = sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur = con.cursor()
        <span class="hljs-comment">#creat the table</span>
        sql = <span class="hljs-string">'insert into role(role_name, role_id) values(?,?)'</span>
        <span class="hljs-comment">#execute</span>
        <span class="hljs-keyword">try</span>:
            cur.executemany(sql,[(<span class="hljs-string">"第一类员工的经理"</span>,<span class="hljs-number">100</span>),(<span class="hljs-string">"第一类员工"</span>,<span class="hljs-number">101</span>),(<span class="hljs-string">"第二类员工的经理"</span>,<span class="hljs-number">200</span>),(<span class="hljs-string">"第二类员工"</span>,<span class="hljs-number">201</span>),(<span class="hljs-string">"Boss"</span>,<span class="hljs-number">404</span>)])
            <span class="hljs-comment">#commitment</span>
            con.commit()
            print(<span class="hljs-string">"设置角色成功"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">"设置角色失败"</span>)
        <span class="hljs-keyword">finally</span>:
            <span class="hljs-comment">#close the connect</span>
            cur.close()
            con.close()
            
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_role_permission_table</span><span class="hljs-params">(self)</span>:</span><span class="hljs-comment">#设置对应的角色权限关联表</span>
        con = sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur = con.cursor()
        sql=<span class="hljs-string">'insert into role_permission(role_id,permission_id) values(?,?)'</span>
        <span class="hljs-keyword">try</span>:
            cur.executemany(sql,[(<span class="hljs-number">101</span>,<span class="hljs-number">1002</span>),(<span class="hljs-number">101</span>,<span class="hljs-number">1003</span>),(<span class="hljs-number">100</span>,<span class="hljs-number">1002</span>),(<span class="hljs-number">100</span>,<span class="hljs-number">1003</span>),(<span class="hljs-number">100</span>,<span class="hljs-number">1005</span>),(<span class="hljs-number">201</span>,<span class="hljs-number">1001</span>),(<span class="hljs-number">201</span>,<span class="hljs-number">1002</span>),(<span class="hljs-number">201</span>,<span class="hljs-number">1004</span>),(<span class="hljs-number">200</span>,<span class="hljs-number">1001</span>),(<span class="hljs-number">200</span>,<span class="hljs-number">1002</span>),(<span class="hljs-number">200</span>,<span class="hljs-number">1004</span>),(<span class="hljs-number">200</span>,<span class="hljs-number">1005</span>),(<span class="hljs-number">404</span>,<span class="hljs-number">1001</span>),(<span class="hljs-number">404</span>,<span class="hljs-number">1002</span>),(<span class="hljs-number">404</span>,<span class="hljs-number">1003</span>),(<span class="hljs-number">404</span>,<span class="hljs-number">1004</span>),(<span class="hljs-number">404</span>,<span class="hljs-number">1005</span>)])
            con.commit()
            print(<span class="hljs-string">"角色权限关联表设置成功"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">"角色权限关联表设置失败"</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()</code></pre>

<ul>
<li>之后是对于权限的修改的函数，增加权限的时候要先判断该角色是否已经有了这个权限，二在删除的时候也应该先看是否具有这个权限，同时不能因为权限改变而改变身份，比如一类员工不能增加权限5，否则会变成第一类员工的经理</li>
</ul>
<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">modify_permission</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-comment">#set the connection to the db file</span>
        con = sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur = con.cursor()
        <span class="hljs-comment">#we need to modify the seperate data row, achieve this by using row</span>
        print(<span class="hljs-string">"here is the id and the name:第一类员工:101   第一类员工的经理:100    第二类员工:201    第二类员工的经理:200    Boss:404"</span>)
        con.row_factory = sqlite3.Row
        print(<span class="hljs-string">"do not modify the Boss's permission!!!"</span>)
        role_id = int(input(<span class="hljs-string">"请输入您要修改权限的角色对应的角色id:"</span>))
        addel = int(input(<span class="hljs-string">"对该角色增加权限请输入1,删除权限请输入2:"</span>))
        print(<span class="hljs-string">"所有可以增加或删除的权限:1001:新建  1002:读取  1003:执行  1004:更改  1005:删除"</span>)
        
        <span class="hljs-keyword">if</span> addel == <span class="hljs-number">1</span>:<span class="hljs-comment">#when it comes to add permission</span>
            permission = int(input(<span class="hljs-string">"请输入要增加权限的对应数字:"</span>))
            <span class="hljs-comment">#then we need to check weather the permission is already exist</span>
            exist = <span class="hljs-literal">False</span>
            <span class="hljs-comment">#we need to check the permission that the role already have</span>
            permissionlist = []
            <span class="hljs-comment">#we need to check the role_permission table</span>
            sql = <span class="hljs-string">'select *from role_permission'</span>
            cur.execute(sql)
            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
                <span class="hljs-keyword">if</span> row[<span class="hljs-number">1</span>] == role_id:
                    permissionlist.append(row[<span class="hljs-number">2</span>])
                    <span class="hljs-keyword">if</span> row[<span class="hljs-number">2</span>] == permission:
                        exist = <span class="hljs-literal">True</span>
                        print(<span class="hljs-string">"该角色已经有了输入的permission id对应的权限,不需要进行增加"</span>)
            <span class="hljs-comment">#if the permission is not exist, add the permission to the role</span>
            <span class="hljs-keyword">if</span> exist == <span class="hljs-literal">False</span>:
                <span class="hljs-comment">#之后我们需要实现对于权限的控制，不能是因为提升权限而变成了另一个角色</span>
                result = <span class="hljs-literal">False</span>
                <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">101</span>:
                    <span class="hljs-keyword">if</span> permission == <span class="hljs-number">1005</span>:
                        result = <span class="hljs-literal">True</span>
                        print(<span class="hljs-string">"增加权限失败，因为第一类员工不能增加权限5，否则会变成第一类员工的经理"</span>)
                        cur.close()
                        con.close()
                <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">201</span>:
                    <span class="hljs-keyword">if</span> permission == <span class="hljs-number">1005</span>:
                        result = <span class="hljs-literal">True</span>
                        print(<span class="hljs-string">"增加权限失败，因为第二类员工不能增加权限5，否则会变成第二类员工的经理"</span>)
                        cur.close()
                        con.close()
                <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">200</span>:
                    <span class="hljs-keyword">if</span> permission == <span class="hljs-number">1003</span>:
                        result = <span class="hljs-literal">True</span>
                        print(<span class="hljs-string">"增加权限失败，因为第二类员工的经理不能增加权限3，否则会变成Boss"</span>)
                        cur.close()
                        con.close()
                <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">404</span>:
                    result = <span class="hljs-literal">True</span>
                    print(<span class="hljs-string">"Boss拥有所有权限，无法提升"</span>)
                    cur.close()
                    con.close()
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result:
                    <span class="hljs-keyword">try</span>:
                        sql1 = <span class="hljs-string">'insert into role_permission(role_id,permission_id) values(?,?)'</span>
                        cur.execute(sql1,(role_id,permission))
                        con.commit()
                        print(<span class="hljs-string">"增加权限成功"</span>)
                    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                        print(e)
                        con.rollback()
                        print(<span class="hljs-string">"增加权限失败，请进行检查"</span>)
                    <span class="hljs-keyword">finally</span>:
                        cur.close()
                        con.close()
        <span class="hljs-keyword">if</span> addel == <span class="hljs-number">2</span>:<span class="hljs-comment">#当要删除权限的时候</span>
            permission = int(input(<span class="hljs-string">"请输入要删除权限的对应数字:"</span>))
            exist = <span class="hljs-literal">False</span>
            sql = <span class="hljs-string">'select *from role_permission'</span>
            permissionlist = []
            cur.execute(sql)
            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
                <span class="hljs-keyword">if</span> row[<span class="hljs-number">1</span>]==role_id:
                    permissionlist.append(row[<span class="hljs-number">2</span>])
                    <span class="hljs-keyword">if</span> row[<span class="hljs-number">2</span>] == permission:
                        exist = <span class="hljs-literal">True</span>
                        print(<span class="hljs-string">"检查通过，该角色拥有对应的权限，可以进行权限的删除"</span>)
                        result = <span class="hljs-literal">False</span>
                        <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">100</span>:
                            <span class="hljs-keyword">if</span> permission == <span class="hljs-number">1005</span>:
                                result = <span class="hljs-literal">True</span>
                                print(<span class="hljs-string">"删除权限失败，因为第一类员工的经理不能删除权限5，否则会变成第一类员工"</span>)
                                cur.close()
                                con.close()
                        <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">200</span>:
                            <span class="hljs-keyword">if</span> permission == <span class="hljs-number">1005</span>:
                                result = <span class="hljs-literal">True</span>
                                print(<span class="hljs-string">"删除权限失败，因为第二类员工的经理不能删除权限5，否则会变成第二类员工"</span>)
                                cur.close()
                                con.close()
                        <span class="hljs-keyword">if</span> role_id == <span class="hljs-number">404</span>:
                            print(<span class="hljs-string">"Boss拥有所有权限，不能删除Boss权限"</span>)
                            cur.close()
                            con.close()
                        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result:
                            <span class="hljs-keyword">try</span>:
                                sql1=<span class="hljs-string">'delete from role_permission where pno=?'</span>
                                cur.execute(sql1,(row[<span class="hljs-number">0</span>],))
                                con.commit()
                                print(<span class="hljs-string">"删除权限成功"</span>)
                            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                                print(e)
                                con.rollback()
                                print(<span class="hljs-string">"删除权限失败"</span>)
                            <span class="hljs-keyword">finally</span>:
                                cur.close()
                                con.close()
                                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exist:
                print(<span class="hljs-string">"没有此权限"</span>)
                cur.close()  
                con.close()</code></pre>

<p>至于用来展示的role_show（）函数，和前面类的展示函数并没有什么区别</p>
<ul>
<li><p>对于权限管理的类permissionmanager（）</p>
<p>  在这里重要的也就是对于权限表的管理，其他的调整关联表的函数上面已经实现</p>
</li>
</ul>
<pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">permissionmanager</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self)</span>:</span>
        super().__init__()
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">permission_show</span><span class="hljs-params">(self)</span>:</span>
        con=sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur=con.cursor()
        sql=<span class="hljs-string">'select *from permission'</span>
        print(<span class="hljs-string">'权限及权限id:'</span>)
        <span class="hljs-keyword">try</span>:
            cur.execute(sql)
            <span class="hljs-keyword">for</span> permission <span class="hljs-keyword">in</span> cur:
                print(permission)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">"显示权限信息失败"</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()
    <span class="hljs-comment">#设置对应的表</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_permission_table</span><span class="hljs-params">(self)</span>:</span>
        con=sqlite3.connect(<span class="hljs-string">"d:/Information System Security/RBAC/datatable.db"</span>)
        cur=con.cursor()
        sql=<span class="hljs-string">'insert into permission(permission_name,permission_id) values(?,?)'</span>
        <span class="hljs-keyword">try</span>:
            cur.executemany(sql,[(<span class="hljs-string">'新建'</span>,<span class="hljs-number">1001</span>),(<span class="hljs-string">'读取'</span>,<span class="hljs-number">1002</span>),(<span class="hljs-string">'执行'</span>,<span class="hljs-number">1003</span>),(<span class="hljs-string">'更改'</span>,<span class="hljs-number">1004</span>),(<span class="hljs-string">'删除'</span>,<span class="hljs-number">1005</span>)])
            con.commit()
            print(<span class="hljs-string">'权限表设置成功'</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            print(e)
            con.rollback()
            print(<span class="hljs-string">'权限表设置失败'</span>)
        <span class="hljs-keyword">finally</span>:
            cur.close()
            con.close()</code></pre>

<p>最后是调用并且实例化上面类的主函数/文件main.py</p>
<p>在这里面主要是mian函数来调用其他类里面的方法，还有就是通过user_list（）以及check（）方法来访问用户表以及查询用户有没有对应的一些权限，以及最开始建立5个表的格式</p>
<p>在这里只贴出部分代码，具体的可以看py文件</p>
<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">user_list</span><span class="hljs-params">()</span>:</span>
    con = sqlite3.connect(<span class="hljs-string">"datatable.db"</span>)
    cur = con.cursor()
    con.row_factory=sqlite3.Row
    sql=<span class="hljs-string">'select *from user'</span>
    <span class="hljs-comment">#进行查找</span>
    <span class="hljs-keyword">try</span>:
        cur.execute(sql)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
            print(row[<span class="hljs-number">0</span>],row[<span class="hljs-number">1</span>],row[<span class="hljs-number">2</span>])
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        print(e)
        con.rollback()
        print(<span class="hljs-string">'查询用户失败'</span>)
    <span class="hljs-keyword">finally</span>:
        cur.close()
        con.close()
        
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">check</span><span class="hljs-params">(username, permission)</span>:</span>
    user_id = <span class="hljs-literal">None</span>
    permission_id = <span class="hljs-literal">None</span>
    role_id = <span class="hljs-literal">None</span>
    permission_list = []
    result = <span class="hljs-literal">False</span> <span class="hljs-comment">#判断是否存在</span>
    con=sqlite3.connect(<span class="hljs-string">"datatable.db"</span>)
    cur=con.cursor()
    con.row_factory=sqlite3.Row
    <span class="hljs-comment">#首先先查找对应的user_id</span>
    <span class="hljs-keyword">try</span>:
        sql=<span class="hljs-string">'select *from user'</span>
        cur.execute(sql)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
            <span class="hljs-keyword">if</span> username == row[<span class="hljs-number">1</span>]:
                <span class="hljs-comment">#找到对应的user_id</span>
                result = <span class="hljs-literal">True</span>
                user_id = row[<span class="hljs-number">2</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result:
            print(<span class="hljs-string">"没有查到该username对应的user_id,请检查后再进行查询"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        print(e)
        con.rollback()
        print(<span class="hljs-string">'check():user_id查询失败,请检查code'</span>)
    
    
    <span class="hljs-comment">#之后来查询对应的role_id</span>
    <span class="hljs-keyword">try</span>:
        sql=<span class="hljs-string">'select *from user_role'</span>
        cur.execute(sql)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
            <span class="hljs-keyword">if</span> user_id == row[<span class="hljs-number">1</span>]:
                role_id = row[<span class="hljs-number">2</span>]
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        print(e)
        con.rollback()
        print(<span class="hljs-string">"check():role_id查询失败,请检查code"</span>)
    

    <span class="hljs-comment">#之后查找所拥有的权限</span>
    <span class="hljs-keyword">try</span>:
        sql=<span class="hljs-string">'select *from role_permission'</span>
        cur.execute(sql)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
            <span class="hljs-keyword">if</span> role_id == row[<span class="hljs-number">1</span>]:
                permission_list.append(row[<span class="hljs-number">2</span>])
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> permission_list:
            print(<span class="hljs-string">'username对应的权限查询失败'</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        print(e)
        con.rollback()
        print(<span class="hljs-string">"check():role_permission查询失败,请检查code"</span>)

    <span class="hljs-comment">#最后查询对应的权限的id</span>
    <span class="hljs-keyword">try</span>:
        sql=<span class="hljs-string">'select *from permission'</span>
        cur.execute(sql)
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cur:
            <span class="hljs-keyword">if</span> permission == row[<span class="hljs-number">1</span>]:
                permission_id = row[<span class="hljs-number">2</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> permission_id:
            print(<span class="hljs-string">"permission对应的permission_id查询失败"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        print(e)
        con.rollback()
        print(<span class="hljs-string">"check():role_id查询失败,请检查code"</span>)

    <span class="hljs-comment">#看输入的权限与查询出来的是否对应</span>
    <span class="hljs-keyword">try</span>:
        result2 = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> permission_list:
            <span class="hljs-keyword">if</span> i == permission_id:
                result2 = <span class="hljs-literal">True</span>
                print(<span class="hljs-string">"有此权限"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result2:
            print(<span class="hljs-string">"没有此权限"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        print(e)
        con.rollback()
        print(<span class="hljs-string">"check():权限不匹配，请检查code"</span>)
    <span class="hljs-keyword">finally</span>:
        cur.close()
        con.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    creat_table()
    user_manage = usermanager()
    role_manage = rolemanager()
    permission_manage = permissionmanager()
    user_manage.set_user_table()
    role_manage.set_role_table()
    permission_manage.set_permission_table()
    user_manage.set_user_role_table()
    role_manage.set_role_permission_table()
    user_list()
    user_manage.user_name_show()
    role_manage.role_show()
    permission_manage.permission_show()

    permit = int(input(<span class="hljs-string">"#####请输入你的身份:1.非管理员 2.管理员:#####"</span>))
    <span class="hljs-keyword">if</span> permit == <span class="hljs-number">2</span>:
        password = input(<span class="hljs-string">"###请输入管理员账户密码:###"</span>)
        <span class="hljs-keyword">if</span> password == <span class="hljs-string">'1234'</span>:
            print(<span class="hljs-string">"1:显示当前信息   2:查询用户对应权限  3:添加用户  4:角色权限修改  5:退出"</span>)
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                option = int(input(<span class="hljs-string">"请输入要进行的操作对应的数字"</span>))
                <span class="hljs-keyword">if</span> option == <span class="hljs-number">1</span>:
                    user_manage.user_name_show()
                    role_manage.role_show()
                    permission_manage.permission_show()
                <span class="hljs-keyword">elif</span> option == <span class="hljs-number">2</span>:
                    username = input(<span class="hljs-string">"请输入要查询的用户名:"</span>)
                    user_permission = input(<span class="hljs-string">"请输入要查询该用户的权限(新建/读取/执行/更改/删除):"</span>)
                    check(username,user_permission)
                <span class="hljs-keyword">elif</span> option == <span class="hljs-number">3</span>:
                    user_manage.add_user()
                <span class="hljs-keyword">elif</span> option == <span class="hljs-number">4</span>:
                    role_manage.modify_permission()
                <span class="hljs-keyword">elif</span> option == <span class="hljs-number">5</span>:
                    <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">else</span>:
                    print(<span class="hljs-string">"输入指令错误，请按照上面显示内容输入"</span>)
        <span class="hljs-keyword">else</span>:
            print(<span class="hljs-string">"密码错误,在运行中为方便使用,密码为1234"</span>)
    
    <span class="hljs-keyword">if</span> permit == <span class="hljs-number">1</span>:
        print(<span class="hljs-string">'1:展示当前信息  2:查询用户权限  3:退出'</span>)
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            option = int(input(<span class="hljs-string">"请输入要进行的操作对应的数字"</span>))
            <span class="hljs-keyword">if</span> option == <span class="hljs-number">1</span>:
                user_manage.user_name_show()
                role_manage.role_show()
                permission_manage.permission_show()
            <span class="hljs-keyword">elif</span> option == <span class="hljs-number">2</span>:
                username = input(<span class="hljs-string">"请输入要查询的用户名:"</span>)
                user_permission = input(<span class="hljs-string">"请输入要查询该用户的权限(新建/读取/执行/更改/删除):"</span>)
                check(username,user_permission)
            <span class="hljs-keyword">elif</span> option == <span class="hljs-number">3</span>:
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">else</span>:
                print(<span class="hljs-string">"输入指令错误，请按照上面显示内容输入"</span>)
    <span class="hljs-keyword">else</span>:
        print(<span class="hljs-string">"输入指令错误，请按照上面显示内容输入"</span>)</code></pre>

<h3 id="成果演示"><a href="#成果演示" class="headerlink" title="成果演示"></a>成果演示</h3><ol>
<li><p>运行对应的mian.py文件，可以看到如下内容</p>
<p> <img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/4-1.PNG" srcset="/img/loading.gif" alt="4-1"></p>
</li>
<li><p>当为非管理员的时候，输入1，可以看到之后的可进行的操作，部分演示，在这里通过查询对应员工是否有权限可以来作为访问和访问拒绝的标志，有此权限说明对应用户可以进行访问，没有此权限则访问拒绝</p>
<p> <img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/4-2.PNG" srcset="/img/loading.gif" alt="4-2"></p>
</li>
<li><p>之后当为管理员的时候，以添加用户为例子来看对应的运行结果</p>
<p> <img src="/2020/11/27/RBAC%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/4-3.PNG" srcset="/img/loading.gif" alt="4-3"></p>
</li>
</ol>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Information-System-Security/">Information System Security</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2020/11/30/Linuc-Firewall-Exploration/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Linuc Firewall Exploration</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/11/21/oslab-2-Memory-Management/">
                        <span class="hidden-mobile">oslab-2 Memory Management</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "RBAC访问控制&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
